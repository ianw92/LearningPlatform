<!-- TODO Remove this line when task index page is deleted -->
<!-- <% if local_assigns.has_key? :todo_list %>
  <% if (local_assigns.fetch :todo_list).id == task.todo_list_id %>
      <% if task == @current_task %>
      <li class='list-item current_task'>
      <% else %>
      <li class='list-item'>
      <% end %>
        <ul class='list-inline'>
          <li class='list-inline-item'>
            <div class='form-check'>
              <label class='form-check-label' style='inline'> -->
                <!-- TODO Make this work using checking/unchecking box to trigger action. Use javascript to make AJAX request -->
                <!-- <% if task.completed? %>
                  <input type='checkbox' class='form-check-input' id='task_completed_check_<%= task.id %>' checked>
                <% else %>
                  <input type='checkbox' class='form-check-input' id='task_completed_check_<%= task.id %>'>
                <% end %>
                  <form class='button_to' method='post' action='/tasks/<%= task.id %>/complete' data-remote='true'>
                    <input type='submit' value='Toggle'>
                    <input name='authenticity_token' value='<%= form_authenticity_token %>' type='hidden'>
                  </form>
              </label>
            </div>
          </li>

          <% if local_assigns.has_key? :short_view %>
            <% if !local_assigns.fetch :short_view %>
              <li class='list-inline-item'><%= task.todo_list.title %></li>
            <% end %>
          <% end %>
          <li class='list-inline-item'><%= task.title %></li>
          <% if (local_assigns.fetch :type) == 'main' %>
            <li class='list-inline-item'><%= task.due_date %></li>
            <li class='list-inline-item'><%= link_to 'Show', task %></li>
            <li class='list-inline-item'><%= link_to 'Edit', edit_task_path(task) %></li>
            <li class='list-inline-item'><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></li> -->

            <!-- Subtasks -->
            <!-- <li class='list-item subtask-list'>
              <ul class='list-inline'>
                <%= render partial: 'subtasks/subtask',
                           collection: @subtasks_global,
                           locals: { short_view: true, task: task } %>
              </ul>
            </li>
          <% end %>

        </ul>
      </li>
  <% end %>
<% end %> -->




<!-- TODO Remove this line when task index page is deleted -->
<% if local_assigns.has_key? :todo_list %>
  <% if (local_assigns.fetch :todo_list).id == task.todo_list_id %>
    <% if task.completed? %>
    <div class='task_completed'>
    <% elsif task.due_date < Date.today %>
    <div class='task_overdue'>
    <% elsif task.due_date == Date.today %>
    <div class='task_due_today'>
    <% elsif task.due_date == Date.tomorrow %>
    <div class='task_due_tomorrow'>
    <% else %>
    <div>
    <% end %>
      <% if task == @current_task %>
      <li class='list-item current_task'>
      <% else %>
      <li class='list-item'>
      <% end %>

        <div class='row'>
          <% if (local_assigns.fetch :type) == 'main' %>
            <div class='col-3 col-sm-2 col-md-2 col-lg-1'>
          <% else %>
            <div class='col-3'>
          <% end %>
            <div class='form-check'>
              <label class='form-check-label' style='inline'>
                <!-- TODO Make this work using checking/unchecking box to trigger action. Use javascript to make AJAX request -->
                <% if task.completed? %>
                  <input type='checkbox' class='form-check-input' id='task_completed_check_<%= task.id %>' checked>
                <% else %>
                  <input type='checkbox' class='form-check-input' id='task_completed_check_<%= task.id %>'>
                <% end %>
                  <form class='button_to' method='post' action='/tasks/<%= task.id %>/complete' data-remote='true'>
                    <input type='submit' value='Toggle'>
                    <input name='authenticity_token' value='<%= form_authenticity_token %>' type='hidden'>
                  </form>
              </label>
            </div>
          </div>

          <% if (local_assigns.fetch :type) == 'main' %>
            <div class='col-9 col-sm-9 col-md-9 col-lg-9'>
          <% else %>
            <div class='col-9'>
          <% end %>
              <%= task.title %>
            </div>
          <% if (local_assigns.fetch :type) == 'main' %>
            <div class='col-7 col-sm-8 col-md-9 col-lg-10'></div>
            <div class='col-5 col-sm-4 col-md-3 col-lg-2'>
              <%= task.due_date %>
              |
              <%= link_to edit_task_path(task), data: { toggle: 'edit-task-tooltip'}, title: 'Edit Task' do %>
                <i class="fas fa-pencil-alt"></i>
              <% end %>
              |
              <%= link_to task, method: :delete, data: { confirm: 'Are you sure?', toggle: 'delete-task-tooltip'}, title: 'Delete Task' do %>
                <i class="fas fa-trash-alt"></i>
              <% end %>
            </div>
          <% end %>

        </div>
      </li>
      <hr>
    </div>
  <% end %>
<% end %>
